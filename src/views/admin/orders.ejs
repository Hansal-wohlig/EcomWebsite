<%- include('../partials/header') %>

<h1>All Orders</h1>
<table border="1" cellpadding="8" cellspacing="0">
  <thead>
    <tr>
      <th>Order ID</th>
      <th>User Email</th>
      <th>Date</th>
      <th>Total</th>
      <th>Products</th>
    </tr>
  </thead>
  <tbody>
    <% if (orders.length === 0) { %>
      <tr><td colspan="5">No orders found.</td></tr>
    <% } %>
    <% orders.forEach(order => { %>
      <tr>
        <td><%= order._id %></td>
        <td><%= order.user ? order.user.email : 'N/A' %></td>
        <td><%= order.createdAt.toLocaleString() %></td>
        <td>₹<%= order.total %></td>
        <td>
          <ul>
            <% order.products.forEach(item => { %>
              <li>
                <%= item.name %> (x<%= item.quantity %>) - ₹<%= item.price %>
              </li>
            <% }) %>
          </ul>
        </td>
      </tr>
    <% }) %>
  </tbody>
</table>

<%- include('../partials/footer') %> 